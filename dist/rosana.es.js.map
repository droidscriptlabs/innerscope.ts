{"version":3,"file":"rosana.es.js","sources":["../.src/+rosana.core.js","../.src/signals.js","../.src/localize.js","../.src/router.js","../.src/suspense.js"],"sourcesContent":["// rosana.js : A High Perfomance Framework\r\n//             To Write Functional Ui,\r\n//             Strongly Based on Signals.\r\n\r\n\"use strict\";\r\n\r\nexport const $uiControl = class {\r\n    constructor() {\r\n        /** @type {HTMLElement | null} */\r\n        this.element = null;\r\n\r\n        /** @type {Array<string>} */\r\n        this.elementClasses = [];\r\n\r\n        /** @type {Array<[string, Function]>} */\r\n        this.eventListeners = [];\r\n    }\r\n\r\n    /**\r\n     * Add a child element to this element.\r\n     * @param {$uiControl} child - The child component to add.\r\n     * @returns {this} - Returns the instance of the class for chaining.\r\n     */\r\n    addChild(child) {\r\n        if (child instanceof $uiControl && this.element) {\r\n            this.element.appendChild(child.element);\r\n        } else {\r\n            console.error(\"Mounted Child Is Not A Rosana Component\");\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the alignment of child elements in the control.\r\n     * @param {string} options - Alignment options.\r\n     */\r\n    set alignment(options) {\r\n        if (options) {\r\n            // @ts-ignore\r\n            optionsApi(this.element, options);\r\n        } else {\r\n            console.log(\"Alignment Options Undefined\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * batch dom api setters and getters effeciently\r\n     * @param {object} props\r\n     * @returns this\r\n     */\r\n    batch(props) {\r\n        Object.entries(props).forEach(([key, value]) => {\r\n            requestAnimationFrame(() => {\r\n                if (this.element) {\r\n                    this.element[key] = value;\r\n                }\r\n            });\r\n        });\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Add an event listener to the element.\r\n     * @param {string} event - The event type.\r\n     * @param {Function} handler - The event handler function.\r\n     * @returns {this} - Returns the instance of the class for chaining.\r\n     */\r\n    on(event, handler) {\r\n        this.element?.addEventListener(event, handler);\r\n        this.eventListeners.push([event, handler]);\r\n        return this;\r\n    }\r\n\r\n    css(styles) {\r\n        const className = cssParser(styles);\r\n        this.element?.classList.add(className);\r\n        this.elementClasses.push(className);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove a child element from this element.\r\n     * @param {instanceOf<$uiControl>} child - The child component to remove.\r\n     * @returns {this} - Returns the instance of the class for chaining.\r\n     */\r\n    destroyChild(child) {\r\n        if (child instanceof $uiControl) {\r\n            child.eventListeners.forEach(([event, Fn]) => {\r\n                child.element?.removeEventListener(event, Fn);\r\n            });\r\n            child.element?.remove();\r\n        } else {\r\n            console.error(\"Child Is Not A Rosana Component\");\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Sets the visibility of the element.\r\n     * @param {boolean} bool - Visibility state.\r\n     */\r\n    show() {\r\n        this.css({ visibility: \"visible\" });\r\n    }\r\n\r\n    /**\r\n     * Hide the element\r\n     */\r\n    hide() {\r\n        this.css({ visibility: \"hidden\" });\r\n    }\r\n\r\n    /**\r\n     * Sets the display and visibility of the element.\r\n     * @param {boolean} bool - Visibility and space control state.\r\n     */\r\n    set gone(bool) {\r\n        this.css({\r\n            display: bool ? \"none !important\" : \"block\",\r\n            visibility: bool ? \"hidden\" : \"visible\",\r\n        });\r\n    }\r\n};\r\n\r\nlet idCount = 0;\r\nlet classnameCount = 0;\r\nfunction generateId() {\r\n    return `rosana-id-${idCount++}`;\r\n}\r\n\r\nfunction generateClassName() {\r\n    return `rosana-class-${classnameCount++}`;\r\n}\r\n\r\n/**\r\n * returns the system device theme, works in browser environment\r\n * @returns SystemTheme\r\n */\r\nexport const $sysTheme = function () {\r\n    const darkThemeMq = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n    if (darkThemeMq.matches) {\r\n        return \"dark\";\r\n    } else return \"light\";\r\n};\r\n\r\n/**\r\n * attach event listeners to the document body.\r\n * @param {HTMLEventListener} event\r\n * @param {Function} handlerFn\r\n */\r\nexport const $on = function (event, handlerFn) {\r\n    document.addEventListener(event, handlerFn);\r\n};\r\n\r\n/**\r\n * Add CSS properties, works with both template literals\r\n * and objects (like Emotion in React).\r\n * Automatically detects the type of\r\n * input and returns a class name.\r\n *\r\n * @param {TemplateStringsArray | object} styles - CSS styles as either a template literal or an object.\r\n * @param {...any} values - Optional values for template literals.\r\n * @returns {string} ClassName - The generated class name.\r\n */\r\n\r\nconst cssParser = (styles, ...values) => {\r\n    const className = generateClassName();\r\n    const styleSheet = document.styleSheets[0];\r\n\r\n    let cssString = \"\";\r\n\r\n    let nestedCssRules = [];\r\n    let mediaQueryRules = [];\r\n\r\n    const parseStyles = (styles, selector) => {\r\n        let baseStyles = \"\";\r\n        Object.entries(styles).forEach(([key, value]) => {\r\n            if (typeof value === \"object\") {\r\n                if (key.startsWith(\"@\")) {\r\n                    mediaQueryRules.push({\r\n                        media: key,\r\n                        selector,\r\n                        styles: value,\r\n                    });\r\n                } else if (key.startsWith(\"&:\")) {\r\n                    // Handle pseudo-classes prefixed with \"&:\"\r\n                    const pseudoClass = key.replace(\"&\", selector);\r\n                    nestedCssRules.push({\r\n                        selector: pseudoClass,\r\n                        styles: value,\r\n                    });\r\n                } else {\r\n                    // Handle other nested selectors\r\n                    nestedCssRules.push({\r\n                        selector: `${selector} ${key}`,\r\n                        styles: value,\r\n                    });\r\n                }\r\n            } else {\r\n                baseStyles += `${key.replace(/([A-Z])/g, \"-$1\").toLowerCase()}: ${value}; `;\r\n            }\r\n        });\r\n        return baseStyles;\r\n    };\r\n\r\n    // Check if 'styles' is a template literal or an object\r\n    if (typeof styles === \"object\" && !Array.isArray(styles)) {\r\n        // It's an object, so we parse it\r\n        cssString = parseStyles(styles, `.${className}`);\r\n    } else if (Array.isArray(styles)) {\r\n        // It's a template literal, combine strings and values into CSS string\r\n        cssString = styles.reduce((result, str, i) => {\r\n            return result + str + (values[i] || \"\");\r\n        }, \"\");\r\n    }\r\n\r\n    // Insert base class CSS rule\r\n    if (cssString) {\r\n        styleSheet.insertRule(`.${className} { ${cssString} }`, styleSheet.cssRules.length);\r\n    }\r\n\r\n    // Insert nested CSS rules\r\n    nestedCssRules.forEach(({ selector, styles }) => {\r\n        const nestedCssString = parseStyles(styles, selector);\r\n        if (nestedCssString) {\r\n            const rule = `${selector} { ${nestedCssString} }`;\r\n            styleSheet.insertRule(rule, styleSheet.cssRules.length);\r\n        }\r\n    });\r\n\r\n    // Insert media query rules\r\n    mediaQueryRules.forEach(({ media, selector, styles }) => {\r\n        const nestedCssString = parseStyles(styles, selector);\r\n        if (nestedCssString) {\r\n            const rule = `${media} { ${selector} { ${nestedCssString} } }`;\r\n            styleSheet.insertRule(rule, styleSheet.cssRules.length);\r\n        }\r\n    });\r\n\r\n    return className;\r\n};\r\n\r\nlet viewOptions = [\r\n    \"noscrollbar\",\r\n    \"scrollxy\",\r\n    \"scrollx\",\r\n    \"scrolly\",\r\n    \"top\",\r\n    \"bottom\",\r\n    \"left\",\r\n    \"right\",\r\n    \"horizontal\",\r\n    \"vertical\",\r\n    \"vcenter\",\r\n    \"center\",\r\n    \"fillxy\",\r\n    \"fillx\",\r\n    \"filly\",\r\n];\r\n\r\n/**\r\n *\r\n * @param {HTMLElement} element\r\n * @param {string} options\r\n */\r\nconst optionsApi = (element, options) => {\r\n    const functions = {\r\n        noscrollbar: () => {\r\n            element.classList.add(\"noscrollbar\");\r\n        },\r\n\r\n        fillxy: () => {\r\n            let className = cssParser({\r\n                width: \"100%\",\r\n                height: window.innerHeight + \"px\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n\r\n        fillx: () => {\r\n            let className = cssParser({\r\n                width: \"100%\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n\r\n        filly: () => {\r\n            let className = cssParser({\r\n                height: window.innerHeight + \"px\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n\r\n        scrollxy: () => {\r\n            let className = cssParser({\r\n                overflow: \"auto\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        scrollx: () => {\r\n            let className = cssParser({\r\n                overflowX: \"auto\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        scrolly: () => {\r\n            let className = cssParser({\r\n                overflowY: \"auto\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        left: () => {\r\n            let className = cssParser({\r\n                display: \"flex\",\r\n                justifyContent: \"flex-start\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        right: () => {\r\n            let className = cssParser({\r\n                display: \"flex\",\r\n                justifyContent: \"flex-end\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        center: () => {\r\n            let className = cssParser({\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        vcenter: () => {\r\n            let className = cssParser({\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        bottom: () => {\r\n            let className = cssParser({\r\n                display: \"flex\",\r\n                alignItems: \"flex-end\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        top: () => {\r\n            let className = cssParser({\r\n                display: \"flex\",\r\n                alignItems: \"flex-start\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        horizontal: () => {\r\n            let className = cssParser({\r\n                display: \"flex\",\r\n                flexDirection: \"row !important\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n        vertical: () => {\r\n            let className = cssParser({\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n            });\r\n            element.classList.add(className);\r\n        },\r\n    };\r\n\r\n    options\r\n        .toLowerCase()\r\n        .replace(/\\s/g, \"\")\r\n        .split(\",\")\r\n        .forEach((el) => {\r\n            if (viewOptions.includes(el)) {\r\n                functions[el]();\r\n            } else {\r\n                console.error(`Unknown option: ${el}`);\r\n            }\r\n        });\r\n};\r\n\r\n/**\r\n * An internal api used by containers and elements, this\r\n * function adds css required for certain types of\r\n * layouts.\r\n * @param {HTMLElement} layout\r\n * @param {string} type\r\n * @param {string} options\r\n */\r\nfunction layoutFitApi(layout, type, options) {\r\n    options ? optionsApi(layout, options) : null;\r\n\r\n    let layoutTYPE = type.toLowerCase();\r\n\r\n    if (layoutTYPE == \"linear\") {\r\n        let className = cssParser({\r\n            display: \"inline-flex\",\r\n            position: \"relative !important\",\r\n            flexDirection: \"column !important\",\r\n        });\r\n        layout.classList.add(className);\r\n    } else if (layoutTYPE == \"absolute\") {\r\n        let className = cssParser({\r\n            display: \"flex\",\r\n        });\r\n        layout.classList.add(className);\r\n    } else console.error(\"Unknown Layout \", layout);\r\n}\r\n\r\nlet $layoutInitializer = class extends $uiControl {\r\n    constructor(type, options) {\r\n        super();\r\n\r\n        this.element = document.createElement(\"div\");\r\n        this.element.id = generateId();\r\n        this.element.type = \"Layout\";\r\n\r\n        type ? layoutFitApi(this.element, type, options) : null;\r\n    }\r\n};\r\n\r\nlet $componentInitalizer = class extends $uiControl {\r\n    constructor(tag, parent, props) {\r\n        super();\r\n        /** @type {HTMLElement} */\r\n        this.element = document.createElement(tag);\r\n        this.element.id = generateId();\r\n\r\n        Object.entries(props).forEach(([key, value]) => {\r\n            requestAnimationFrame(() => {\r\n                this.element[key] = value;\r\n            });\r\n        });\r\n\r\n        if (parent instanceof $uiControl) {\r\n            parent.addChild(this);\r\n        } else {\r\n            console.error(\"No Parent For Component To Attach To.\");\r\n            return;\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * creates a layout, it takes in child components.\r\n * @param {string} type - The type of container (e.g., 'div', 'section').\r\n * @param {string} options - Alignment options\r\n * @returns {HTMLDivElement}\r\n */\r\nexport const $layout = function (type = \"linear\", options = \"fillxy, vcenter\") {\r\n    return new $layoutInitializer(type, options);\r\n};\r\n\r\n/**\r\n * create a component\r\n * @param {HTMLElementTagNameMap} tag\r\n * @param {InstanceType<$uiControl>} parent\r\n * @param {Object} props\r\n */\r\nexport const $component = function (tag, parent, props = {}) {\r\n    return new $componentInitalizer(tag, parent, props);\r\n};\r\n\r\n/**\r\n * This function is used to attach the main component\r\n * of your app, so as to mount plugins\r\n * @param {Function} mainComponent\r\n * @returns app\r\n */\r\nexport const $createApp = function (mainComponent) {\r\n    const app = {\r\n        _rootComponent: mainComponent,\r\n        _plugins: [],\r\n\r\n        /**\r\n         * An Elements Id\r\n         * The provided string is queried so that the\r\n         * main component is appended to it.\r\n         * @param {string} selector\r\n         * @returns this\r\n         */\r\n        mount: function (selector) {\r\n            const container = document.querySelector(selector);\r\n            if (!container) {\r\n                console.error(`No element found for selector \"${selector}\"`);\r\n                return;\r\n            }\r\n\r\n            document.body.style.margin = \"0\";\r\n            document.body.style.width = \"100%\";\r\n\r\n            container.innerHTML = \"\";\r\n            const instance = this._rootComponent;\r\n            container.appendChild(instance.element);\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Function} plugin\r\n         * @returns this\r\n         */\r\n        use(plugin) {\r\n            if (typeof plugin._install === \"function\") {\r\n                plugin._install(this);\r\n                this._plugins.push(plugin);\r\n            }\r\n            return this;\r\n        },\r\n    };\r\n    return app;\r\n};\r\n","/**\r\n * signal Method allows you to use plain signals, it takes in plain values and gives reactivity.\r\n * @param {any} defaultValue\r\n */\r\nexport const $signal = function (defaultValue = null) {\r\n    let internal_variable = defaultValue;\r\n    let subscriptions = [];\r\n\r\n    /**\r\n     * notify the user\r\n     * @param {Function} fn\r\n     */\r\n    const notify = function (fn) {\r\n        for (let subscriber of subscriptions) {\r\n            subscriber(internal_variable);\r\n        }\r\n    };\r\n    return {\r\n        /**\r\n         * set the signal's value\r\n         * @param {any} val\r\n         */\r\n        set value(val) {\r\n            internal_variable = val;\r\n            notify();\r\n        },\r\n\r\n        /**\r\n         * returns the signals value\r\n         * @returns internal_variable\r\n         */\r\n        get value() {\r\n            return internal_variable;\r\n        },\r\n\r\n        /**\r\n         * subscribe to the signal\r\n         * @param {Function} fn\r\n         */\r\n        subscribe: (fn) => {\r\n            subscriptions.push(fn);\r\n        },\r\n    };\r\n};\r\n\r\n/**\r\n * add a signal that takes in the defaultValue as an object\r\n * @param {Object} initialValue = {}\r\n */\r\nexport const $store = function (initialValue = {}) {\r\n    let state = { ...initialValue };\r\n    const listeners = new Set();\r\n\r\n    return {\r\n        /**\r\n         * set the signal's value\r\n         * @param {any} val\r\n         */\r\n        set(key, value) {\r\n            state[key] = value;\r\n            listeners.forEach((listener) => listener(state));\r\n        },\r\n\r\n        /**\r\n         * returns the signals value\r\n         * @returns internal_variable\r\n         */\r\n        get(key) {\r\n            return state[key];\r\n        },\r\n\r\n        /**\r\n         * subscribe to the signal\r\n         * @param {Function} fn\r\n         */\r\n        subscribe(listener) {\r\n            listeners.add(listener);\r\n            return () => listeners.delete(listener);\r\n        },\r\n    };\r\n};\r\n","import { $uiControl } from \"./+rosana.core.js\";\r\nimport { $signal } from \"./signals.js\";\r\n\r\nconst defaultLanguage = navigator.language || navigator.userLanguage;\r\nconst defaultLangCode = defaultLanguage.split(\"-\")[0];\r\nlet translations = {};\r\n\r\nlet currentLang;\r\n\r\nexport const $localize = async function (defaultLang = defaultLangCode, jsonSource) {\r\n    currentLang = $signal(defaultLang);\r\n\r\n    const response = await fetch(jsonSource);\r\n    if (!response.ok) {\r\n        console.log(\"Translation File Not Loaded\");\r\n        return;\r\n    }\r\n\r\n    const loadedTranslations = await response.json();\r\n    translations = { ...translations, ...loadedTranslations };\r\n};\r\n\r\nexport const $setLanguage = function (langCode) {\r\n    currentLang.value = langCode;\r\n};\r\n\r\nlet $localizedText = function (key, placeholders) {\r\n    if (!currentLang || !currentLang.value) {\r\n        return key;\r\n    }\r\n\r\n    const langData = translations[currentLang.value] || translations[defaultLangCode] || {};\r\n    let translation = langData[key] || key;\r\n    if (placeholders) {\r\n        Object.keys(placeholders).forEach((placeholder) => {\r\n            translation = translation.replace(`{${placeholder}}`, placeholders[placeholder]);\r\n        });\r\n    }\r\n    return translation;\r\n};\r\n\r\n/**\r\n * Set the text accordingly to the languageCode and provided keys\r\n * @param {object} localizingFn\r\n * @param {string} key\r\n * @param {object} placeholders\r\n */\r\n$uiControl.prototype.localizedText = async function (key, placeholders) {\r\n    if (!currentLang || !currentLang.value) {\r\n        return key;\r\n    }\r\n\r\n    const localizedText = await $localizedText(key, placeholders);\r\n\r\n    this.element.textContent = localizedText;\r\n\r\n    currentLang.subscribe(async () => {\r\n        const localizedText = await $localizedText(key, placeholders);\r\n        this.element.textContent = localizedText;\r\n    });\r\n};\r\n","// @ts-nocheck\r\n\r\n/**\r\n * Hash-Based Router with Dynamic Route Parameter Support\r\n * @param {Array<Object>} hashParam\r\n */\r\nexport const $hashRouter = function (hashParam) {\r\n    const plugin = {\r\n        routes: hashParam,\r\n        currentRoute: null,\r\n        params: {},\r\n\r\n        _init: function () {\r\n            console.table(this.routes);\r\n            window.addEventListener(\"hashchange\", this._handleHashChange.bind(this));\r\n            if (window.location.hash) {\r\n                this._handleHashChange();\r\n            } else {\r\n                window.location.hash = \"#/\";\r\n            }\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {any} app\r\n         */\r\n        _install: function (app) {\r\n            this._init();\r\n            app.router = this;\r\n        },\r\n\r\n        _render: function () {\r\n            const appContainer = document.querySelector(\"#app\");\r\n            if (!appContainer) {\r\n                console.error(\"App container not found.\");\r\n                return;\r\n            }\r\n            appContainer.innerHTML = \"\";\r\n\r\n            if (this.currentRoute && this.currentRoute.component) {\r\n                const component = this.currentRoute.component;\r\n                appContainer.appendChild(component.element);\r\n\r\n                // Pass params to the component if updateParams is defined\r\n                if (typeof component.updateParams === \"function\") {\r\n                    component.updateParams(this.params);\r\n                }\r\n            } else {\r\n                console.error(\"No valid component found for route.\");\r\n            }\r\n        },\r\n\r\n        _handleHashChange: function () {\r\n            const hash = window.location.hash.slice(1) || \"/\";\r\n\r\n            // Find the matching route with support for dynamic parameters\r\n            const matchedRoute = this._matchRoute(hash);\r\n\r\n            if (matchedRoute) {\r\n                this.currentRoute = matchedRoute.route;\r\n                this.params = matchedRoute.params;\r\n                this._render();\r\n            } else {\r\n                console.error(`Route not found: ${hash}`);\r\n            }\r\n        },\r\n\r\n        _matchRoute(path) {\r\n            // Loop through routes to find a match with parameters\r\n            for (const route of this.routes) {\r\n                const { regex, keys } = this._pathToRegex(route.path);\r\n                const match = path.match(regex);\r\n\r\n                if (match) {\r\n                    const params = keys.reduce((acc, key, index) => {\r\n                        acc[key] = match[index + 1];\r\n                        return acc;\r\n                    }, {});\r\n                    return { route, params };\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n\r\n        _pathToRegex(path) {\r\n            // Convert route path into regex and extract parameter keys\r\n            const keys = [];\r\n            const regexString = path\r\n                .replace(/:([\\w]+)/g, (_, key) => {\r\n                    keys.push(key);\r\n                    return \"([^\\\\/]+)\";\r\n                })\r\n                .replace(/\\//g, \"\\\\/\");\r\n            return { regex: new RegExp(`^${regexString}$`), keys };\r\n        },\r\n\r\n        /**\r\n         * Navigate to a specified path with parameters\r\n         * @param {string} path\r\n         * @param {object} params\r\n         */\r\n        navigate(path, params = {}) {\r\n            // Replace each :param in the path with the corresponding value from params\r\n            const fullPath = path.replace(/:([\\w]+)/g, (_, key) => {\r\n                if (params[key] === undefined) {\r\n                    console.error(`Parameter \"${key}\" not provided for path: ${path}`);\r\n                    return `:${key}`; // Keeps the placeholder if parameter is missing\r\n                }\r\n                return params[key];\r\n            });\r\n\r\n            window.location.hash = fullPath;\r\n        },\r\n\r\n        back: function () {\r\n            history.back();\r\n        },\r\n\r\n        forward: function () {\r\n            history.forward();\r\n        },\r\n    };\r\n    return plugin;\r\n};\r\n","/**\r\n * showIF method allows you to hide or show an element if the restingParameter is truthy\r\n * @param {Boolean} restingParameter\r\n * @param {instanceOf<$uiControl>} onTruthyElement\r\n * @param {instanceOf<$uiControl>} onFalseyElement\r\n */\r\nexport const $showIF = function (restingParameter, onTruthyElement, onFalseyElement) {\r\n    if (onTruthyElement === undefined || onFalseyElement === undefined) {\r\n        console.error(`showIF not called, one of the elements is undefined`);\r\n        return;\r\n    }\r\n    restingParameter ? onTruthyElement.show() : onTruthyElement.hide();\r\n    !restingParameter ? onFalseyElement.show() : onFalseyElement.hide();\r\n};\r\n\r\n/**\r\n * show a fallback view during an async operation, then swap it out when done.\r\n * @param {asyncFunction} resource\r\n * @param {instanceOf<$uiControl>} fallback\r\n * @param {instanceOf<$uiControl>} controlInSuspension\r\n */\r\nexport const $suspense = (resource, fallback, controlInSuspension) => {\r\n    const subscriptions = [];\r\n\r\n    const notify = () => subscriptions.forEach((subscriber) => subscriber());\r\n\r\n    if (fallback.type === \"Layout\" && controlInSuspension.type === \"Layout\") {\r\n        if (!controlInSuspension.hasChild(fallback)) {\r\n            console.error(`FallBack is not a child of ${controlInSuspension}`);\r\n            return;\r\n        }\r\n\r\n        ap.mount(fallback);\r\n\r\n        const showFallback = () => {\r\n            fallback.show();\r\n            controlInSuspension.hide();\r\n        };\r\n\r\n        const showSuspended = () => {\r\n            controlInSuspension.show();\r\n            fallback.hide();\r\n        };\r\n\r\n        showFallback();\r\n\r\n        Promise.resolve(resource())\r\n            .then(() => {\r\n                showSuspended();\r\n                notify();\r\n            })\r\n            .catch(() => showFallback());\r\n    } else {\r\n        console.error(\"suspense must be used with both containers as a layout\");\r\n    }\r\n    return {\r\n        /**\r\n         * call a function after the new view is added\r\n         * @param {Function} fn\r\n         */\r\n        effects: (fn) => subscriptions.push(fn),\r\n    };\r\n};\r\n"],"names":["$uiControl","child","options","optionsApi","props","key","value","event","handler","_a","styles","className","cssParser","Fn","bool","idCount","classnameCount","generateId","generateClassName","values","styleSheet","cssString","nestedCssRules","mediaQueryRules","parseStyles","selector","baseStyles","pseudoClass","result","str","i","nestedCssString","rule","media","viewOptions","element","functions","el","layoutFitApi","layout","type","layoutTYPE","$layoutInitializer","$componentInitalizer","tag","parent","$layout","$component","$createApp","mainComponent","container","instance","plugin","$signal","defaultValue","internal_variable","subscriptions","notify","fn","subscriber","val","$store","initialValue","state","listeners","listener","defaultLanguage","defaultLangCode","translations","currentLang","$localize","defaultLang","jsonSource","response","loadedTranslations","$setLanguage","langCode","$localizedText","placeholders","translation","placeholder","localizedText","$hashRouter","hashParam","app","appContainer","component","hash","matchedRoute","path","route","regex","keys","match","params","acc","index","regexString","_","fullPath","$showIF","restingParameter","onTruthyElement","onFalseyElement","$suspense","resource","fallback","controlInSuspension","showFallback","showSuspended"],"mappings":"AAMO,MAAMA,IAAa,MAAM;AAAA,EAC5B,cAAc;AAEV,SAAK,UAAU,MAGf,KAAK,iBAAiB,IAGtB,KAAK,iBAAiB;EACzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,SAASC,GAAO;AACZ,WAAIA,aAAiBD,KAAc,KAAK,UACpC,KAAK,QAAQ,YAAYC,EAAM,OAAO,IAEtC,QAAQ,MAAM,yCAAyC,GAEpD;AAAA,EACV;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,IAAI,UAAUC,GAAS;AACnB,IAAIA,IAEAC,EAAW,KAAK,SAASD,CAAO,IAEhC,QAAQ,IAAI,6BAA6B;AAAA,EAEhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,MAAME,GAAO;AACT,kBAAO,QAAQA,CAAK,EAAE,QAAQ,CAAC,CAACC,GAAKC,CAAK,MAAM;AAC5C,4BAAsB,MAAM;AACxB,QAAI,KAAK,YACL,KAAK,QAAQD,CAAG,IAAIC;AAAA,MAExC,CAAa;AAAA,IACb,CAAS,GACM;AAAA,EACV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQD,GAAGC,GAAOC,GAAS;AAnEvB,QAAAC;AAoEQ,YAAAA,IAAA,KAAK,YAAL,QAAAA,EAAc,iBAAiBF,GAAOC,IACtC,KAAK,eAAe,KAAK,CAACD,GAAOC,CAAO,CAAC,GAClC;AAAA,EACV;AAAA,EAED,IAAIE,GAAQ;AAzEhB,QAAAD;AA0EQ,UAAME,IAAYC,EAAUF,CAAM;AAClC,YAAAD,IAAA,KAAK,YAAL,QAAAA,EAAc,UAAU,IAAIE,IAC5B,KAAK,eAAe,KAAKA,CAAS,GAC3B;AAAA,EACV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,aAAaV,GAAO;AArFxB,QAAAQ;AAsFQ,WAAIR,aAAiBD,KACjBC,EAAM,eAAe,QAAQ,CAAC,CAACM,GAAOM,CAAE,MAAM;AAvF1D,UAAAJ;AAwFgB,OAAAA,IAAAR,EAAM,YAAN,QAAAQ,EAAe,oBAAoBF,GAAOM;AAAA,IAC1D,CAAa,IACDJ,IAAAR,EAAM,YAAN,QAAAQ,EAAe,YAEf,QAAQ,MAAM,iCAAiC,GAE5C;AAAA,EACV;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,OAAO;AACH,SAAK,IAAI,EAAE,YAAY,UAAW,CAAA;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA,EAKD,OAAO;AACH,SAAK,IAAI,EAAE,YAAY,SAAU,CAAA;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,IAAI,KAAKK,GAAM;AACX,SAAK,IAAI;AAAA,MACL,SAASA,IAAO,oBAAoB;AAAA,MACpC,YAAYA,IAAO,WAAW;AAAA,IAC1C,CAAS;AAAA,EACJ;AACL;AAEA,IAAIC,IAAU,GACVC,IAAiB;AACrB,SAASC,IAAa;AAClB,SAAO,aAAaF,GAAS;AACjC;AAEA,SAASG,IAAoB;AACzB,SAAO,gBAAgBF,GAAgB;AAC3C;AAiCA,MAAMJ,IAAY,CAACF,MAAWS,MAAW;AACrC,QAAMR,IAAYO,KACZE,IAAa,SAAS,YAAY,CAAC;AAEzC,MAAIC,IAAY,IAEZC,IAAiB,CAAA,GACjBC,IAAkB,CAAA;AAEtB,QAAMC,IAAc,CAACd,GAAQe,MAAa;AACtC,QAAIC,IAAa;AACjB,kBAAO,QAAQhB,CAAM,EAAE,QAAQ,CAAC,CAACL,GAAKC,CAAK,MAAM;AAC7C,UAAI,OAAOA,KAAU;AACjB,YAAID,EAAI,WAAW,GAAG;AAClB,UAAAkB,EAAgB,KAAK;AAAA,YACjB,OAAOlB;AAAA,YACP,UAAAoB;AAAA,YACA,QAAQnB;AAAA,UAChC,CAAqB;AAAA,iBACMD,EAAI,WAAW,IAAI,GAAG;AAE7B,gBAAMsB,IAActB,EAAI,QAAQ,KAAKoB,CAAQ;AAC7C,UAAAH,EAAe,KAAK;AAAA,YAChB,UAAUK;AAAA,YACV,QAAQrB;AAAA,UAChC,CAAqB;AAAA,QACrB;AAEoB,UAAAgB,EAAe,KAAK;AAAA,YAChB,UAAU,GAAGG,CAAQ,IAAIpB,CAAG;AAAA,YAC5B,QAAQC;AAAA,UAChC,CAAqB;AAAA;AAGL,QAAAoB,KAAc,GAAGrB,EAAI,QAAQ,YAAY,KAAK,EAAE,aAAa,KAAKC,CAAK;AAAA,IAEvF,CAAS,GACMoB;AAAA,EACf;AAGI,SAAI,OAAOhB,KAAW,YAAY,CAAC,MAAM,QAAQA,CAAM,IAEnDW,IAAYG,EAAYd,GAAQ,IAAIC,CAAS,EAAE,IACxC,MAAM,QAAQD,CAAM,MAE3BW,IAAYX,EAAO,OAAO,CAACkB,GAAQC,GAAKC,MAC7BF,IAASC,KAAOV,EAAOW,CAAC,KAAK,KACrC,EAAE,IAILT,KACAD,EAAW,WAAW,IAAIT,CAAS,MAAMU,CAAS,MAAMD,EAAW,SAAS,MAAM,GAItFE,EAAe,QAAQ,CAAC,EAAE,UAAAG,GAAU,QAAAf,EAAM,MAAO;AAC7C,UAAMqB,IAAkBP,EAAYd,GAAQe,CAAQ;AACpD,QAAIM,GAAiB;AACjB,YAAMC,IAAO,GAAGP,CAAQ,MAAMM,CAAe;AAC7C,MAAAX,EAAW,WAAWY,GAAMZ,EAAW,SAAS,MAAM;AAAA,IACzD;AAAA,EACT,CAAK,GAGDG,EAAgB,QAAQ,CAAC,EAAE,OAAAU,GAAO,UAAAR,GAAU,QAAAf,EAAM,MAAO;AACrD,UAAMqB,IAAkBP,EAAYd,GAAQe,CAAQ;AACpD,QAAIM,GAAiB;AACjB,YAAMC,IAAO,GAAGC,CAAK,MAAMR,CAAQ,MAAMM,CAAe;AACxD,MAAAX,EAAW,WAAWY,GAAMZ,EAAW,SAAS,MAAM;AAAA,IACzD;AAAA,EACT,CAAK,GAEMT;AACX;AAEA,IAAIuB,IAAc;AAAA,EACd;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;AAOA,MAAM/B,IAAa,CAACgC,GAASjC,MAAY;AACrC,QAAMkC,IAAY;AAAA,IACd,aAAa,MAAM;AACf,MAAAD,EAAQ,UAAU,IAAI,aAAa;AAAA,IACtC;AAAA,IAED,QAAQ,MAAM;AACV,UAAIxB,IAAYC,EAAU;AAAA,QACtB,OAAO;AAAA,QACP,QAAQ,OAAO,cAAc;AAAA,MAC7C,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IAED,OAAO,MAAM;AACT,UAAIA,IAAYC,EAAU;AAAA,QACtB,OAAO;AAAA,MACvB,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IAED,OAAO,MAAM;AACT,UAAIA,IAAYC,EAAU;AAAA,QACtB,QAAQ,OAAO,cAAc;AAAA,MAC7C,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IAED,UAAU,MAAM;AACZ,UAAIA,IAAYC,EAAU;AAAA,QACtB,UAAU;AAAA,MAC1B,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,SAAS,MAAM;AACX,UAAIA,IAAYC,EAAU;AAAA,QACtB,WAAW;AAAA,MAC3B,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,SAAS,MAAM;AACX,UAAIA,IAAYC,EAAU;AAAA,QACtB,WAAW;AAAA,MAC3B,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,MAAM,MAAM;AACR,UAAIA,IAAYC,EAAU;AAAA,QACtB,SAAS;AAAA,QACT,gBAAgB;AAAA,MAChC,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,OAAO,MAAM;AACT,UAAIA,IAAYC,EAAU;AAAA,QACtB,SAAS;AAAA,QACT,gBAAgB;AAAA,MAChC,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,QAAQ,MAAM;AACV,UAAIA,IAAYC,EAAU;AAAA,QACtB,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,gBAAgB;AAAA,MAChC,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,SAAS,MAAM;AACX,UAAIA,IAAYC,EAAU;AAAA,QACtB,SAAS;AAAA,QACT,gBAAgB;AAAA,QAChB,YAAY;AAAA,MAC5B,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,QAAQ,MAAM;AACV,UAAIA,IAAYC,EAAU;AAAA,QACtB,SAAS;AAAA,QACT,YAAY;AAAA,MAC5B,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,KAAK,MAAM;AACP,UAAIA,IAAYC,EAAU;AAAA,QACtB,SAAS;AAAA,QACT,YAAY;AAAA,MAC5B,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,YAAY,MAAM;AACd,UAAIA,IAAYC,EAAU;AAAA,QACtB,SAAS;AAAA,QACT,eAAe;AAAA,MAC/B,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,IACD,UAAU,MAAM;AACZ,UAAIA,IAAYC,EAAU;AAAA,QACtB,SAAS;AAAA,QACT,eAAe;AAAA,MAC/B,CAAa;AACD,MAAAuB,EAAQ,UAAU,IAAIxB,CAAS;AAAA,IAClC;AAAA,EACT;AAEI,EAAAT,EACK,YAAa,EACb,QAAQ,OAAO,EAAE,EACjB,MAAM,GAAG,EACT,QAAQ,CAACmC,MAAO;AACb,IAAIH,EAAY,SAASG,CAAE,IACvBD,EAAUC,CAAE,MAEZ,QAAQ,MAAM,mBAAmBA,CAAE,EAAE;AAAA,EAErD,CAAS;AACT;AAUA,SAASC,EAAaC,GAAQC,GAAMtC,GAAS;AACzC,EAAAA,KAAUC,EAAWoC,GAAQrC,CAAO;AAEpC,MAAIuC,IAAaD,EAAK;AAEtB,MAAIC,KAAc,UAAU;AACxB,QAAI9B,IAAYC,EAAU;AAAA,MACtB,SAAS;AAAA,MACT,UAAU;AAAA,MACV,eAAe;AAAA,IAC3B,CAAS;AACD,IAAA2B,EAAO,UAAU,IAAI5B,CAAS;AAAA,EACtC,WAAe8B,KAAc,YAAY;AACjC,QAAI9B,IAAYC,EAAU;AAAA,MACtB,SAAS;AAAA,IACrB,CAAS;AACD,IAAA2B,EAAO,UAAU,IAAI5B,CAAS;AAAA,EACjC,MAAM,SAAQ,MAAM,mBAAmB4B,CAAM;AAClD;AAEA,IAAIG,IAAqB,cAAc1C,EAAW;AAAA,EAC9C,YAAYwC,GAAMtC,GAAS;AACvB,aAEA,KAAK,UAAU,SAAS,cAAc,KAAK,GAC3C,KAAK,QAAQ,KAAKe,KAClB,KAAK,QAAQ,OAAO,UAEpBuB,KAAOF,EAAa,KAAK,SAASE,GAAMtC,CAAO;AAAA,EAClD;AACL,GAEIyC,IAAuB,cAAc3C,EAAW;AAAA,EAChD,YAAY4C,GAAKC,GAAQzC,GAAO;AAY5B,QAXA,SAEA,KAAK,UAAU,SAAS,cAAcwC,CAAG,GACzC,KAAK,QAAQ,KAAK3B,KAElB,OAAO,QAAQb,CAAK,EAAE,QAAQ,CAAC,CAACC,GAAKC,CAAK,MAAM;AAC5C,4BAAsB,MAAM;AACxB,aAAK,QAAQD,CAAG,IAAIC;AAAA,MACpC,CAAa;AAAA,IACb,CAAS,GAEGuC,aAAkB7C;AAClB,MAAA6C,EAAO,SAAS,IAAI;AAAA,SACjB;AACH,cAAQ,MAAM,uCAAuC;AACrD;AAAA,IACH;AAAA,EACJ;AACL;AAQY,MAACC,IAAU,SAAUN,IAAO,UAAUtC,IAAU,mBAAmB;AAC3E,SAAO,IAAIwC,EAAmBF,GAAMtC,CAAO;AAC/C,GAQa6C,IAAa,SAAUH,GAAKC,GAAQzC,IAAQ,CAAA,GAAI;AACzD,SAAO,IAAIuC,EAAqBC,GAAKC,GAAQzC,CAAK;AACtD,GAQa4C,IAAa,SAAUC,GAAe;AAyC/C,SAxCY;AAAA,IACR,gBAAgBA;AAAA,IAChB,UAAU,CAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IASZ,OAAO,SAAUxB,GAAU;AACvB,YAAMyB,IAAY,SAAS,cAAczB,CAAQ;AACjD,UAAI,CAACyB,GAAW;AACZ,gBAAQ,MAAM,kCAAkCzB,CAAQ,GAAG;AAC3D;AAAA,MACH;AAED,eAAS,KAAK,MAAM,SAAS,KAC7B,SAAS,KAAK,MAAM,QAAQ,QAE5ByB,EAAU,YAAY;AACtB,YAAMC,IAAW,KAAK;AACtB,aAAAD,EAAU,YAAYC,EAAS,OAAO,GAC/B;AAAA,IACV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOD,IAAIC,GAAQ;AACR,aAAI,OAAOA,EAAO,YAAa,eAC3BA,EAAO,SAAS,IAAI,GACpB,KAAK,SAAS,KAAKA,CAAM,IAEtB;AAAA,IACV;AAAA,EACT;AAEA,GC9faC,IAAU,SAAUC,IAAe,MAAM;AAClD,MAAIC,IAAoBD,GACpBE,IAAgB,CAAA;AAMpB,QAAMC,IAAS,SAAUC,GAAI;AACzB,aAASC,KAAcH;AACnB,MAAAG,EAAWJ,CAAiB;AAAA,EAExC;AACI,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA,IAKH,IAAI,MAAMK,GAAK;AACX,MAAAL,IAAoBK,GACpBH;IACH;AAAA;AAAA;AAAA;AAAA;AAAA,IAMD,IAAI,QAAQ;AACR,aAAOF;AAAA,IACV;AAAA;AAAA;AAAA;AAAA;AAAA,IAMD,WAAW,CAACG,MAAO;AACf,MAAAF,EAAc,KAAKE,CAAE;AAAA,IACxB;AAAA,EACT;AACA,GAMaG,IAAS,SAAUC,IAAe,IAAI;AAC/C,MAAIC,IAAQ,EAAE,GAAGD;AACjB,QAAME,IAAY,oBAAI;AAEtB,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA,IAKH,IAAI3D,GAAKC,GAAO;AACZ,MAAAyD,EAAM1D,CAAG,IAAIC,GACb0D,EAAU,QAAQ,CAACC,MAAaA,EAASF,CAAK,CAAC;AAAA,IAClD;AAAA;AAAA;AAAA;AAAA;AAAA,IAMD,IAAI1D,GAAK;AACL,aAAO0D,EAAM1D,CAAG;AAAA,IACnB;AAAA;AAAA;AAAA;AAAA;AAAA,IAMD,UAAU4D,GAAU;AAChB,aAAAD,EAAU,IAAIC,CAAQ,GACf,MAAMD,EAAU,OAAOC,CAAQ;AAAA,IACzC;AAAA,EACT;AACA,GC7EMC,IAAkB,UAAU,YAAY,UAAU,cAClDC,IAAkBD,EAAgB,MAAM,GAAG,EAAE,CAAC;AACpD,IAAIE,IAAe,CAAA,GAEfC;AAEQ,MAACC,IAAY,eAAgBC,IAAcJ,GAAiBK,GAAY;AAChF,EAAAH,IAAchB,EAAQkB,CAAW;AAEjC,QAAME,IAAW,MAAM,MAAMD,CAAU;AACvC,MAAI,CAACC,EAAS,IAAI;AACd,YAAQ,IAAI,6BAA6B;AACzC;AAAA,EACH;AAED,QAAMC,IAAqB,MAAMD,EAAS;AAC1C,EAAAL,IAAe,EAAE,GAAGA,GAAc,GAAGM,EAAkB;AAC3D,GAEaC,IAAe,SAAUC,GAAU;AAC5C,EAAAP,EAAY,QAAQO;AACxB;AAEA,IAAIC,IAAiB,SAAUxE,GAAKyE,GAAc;AAC9C,MAAI,CAACT,KAAe,CAACA,EAAY;AAC7B,WAAOhE;AAIX,MAAI0E,KADaX,EAAaC,EAAY,KAAK,KAAKD,EAAaD,CAAe,KAAK,IAC1D9D,CAAG,KAAKA;AACnC,SAAIyE,KACA,OAAO,KAAKA,CAAY,EAAE,QAAQ,CAACE,MAAgB;AAC/C,IAAAD,IAAcA,EAAY,QAAQ,IAAIC,CAAW,KAAKF,EAAaE,CAAW,CAAC;AAAA,EAC3F,CAAS,GAEED;AACX;AAQA/E,EAAW,UAAU,gBAAgB,eAAgBK,GAAKyE,GAAc;AACpE,MAAI,CAACT,KAAe,CAACA,EAAY;AAC7B,WAAOhE;AAGX,QAAM4E,IAAgB,MAAMJ,EAAexE,GAAKyE,CAAY;AAE5D,OAAK,QAAQ,cAAcG,GAE3BZ,EAAY,UAAU,YAAY;AAC9B,UAAMY,IAAgB,MAAMJ,EAAexE,GAAKyE,CAAY;AAC5D,SAAK,QAAQ,cAAcG;AAAA,EACnC,CAAK;AACL;ACtDY,MAACC,IAAc,SAAUC,GAAW;AAoH5C,SAnHe;AAAA,IACX,QAAQA;AAAA,IACR,cAAc;AAAA,IACd,QAAQ,CAAE;AAAA,IAEV,OAAO,WAAY;AACf,qBAAQ,MAAM,KAAK,MAAM,GACzB,OAAO,iBAAiB,cAAc,KAAK,kBAAkB,KAAK,IAAI,CAAC,GACnE,OAAO,SAAS,OAChB,KAAK,kBAAiB,IAEtB,OAAO,SAAS,OAAO,MAEpB;AAAA,IACV;AAAA;AAAA;AAAA;AAAA,IAKD,UAAU,SAAUC,GAAK;AACrB,WAAK,MAAK,GACVA,EAAI,SAAS;AAAA,IAChB;AAAA,IAED,SAAS,WAAY;AACjB,YAAMC,IAAe,SAAS,cAAc,MAAM;AAClD,UAAI,CAACA,GAAc;AACf,gBAAQ,MAAM,0BAA0B;AACxC;AAAA,MACH;AAGD,UAFAA,EAAa,YAAY,IAErB,KAAK,gBAAgB,KAAK,aAAa,WAAW;AAClD,cAAMC,IAAY,KAAK,aAAa;AACpC,QAAAD,EAAa,YAAYC,EAAU,OAAO,GAGtC,OAAOA,EAAU,gBAAiB,cAClCA,EAAU,aAAa,KAAK,MAAM;AAAA,MAEtD;AACgB,gBAAQ,MAAM,qCAAqC;AAAA,IAE1D;AAAA,IAED,mBAAmB,WAAY;AAC3B,YAAMC,IAAO,OAAO,SAAS,KAAK,MAAM,CAAC,KAAK,KAGxCC,IAAe,KAAK,YAAYD,CAAI;AAE1C,MAAIC,KACA,KAAK,eAAeA,EAAa,OACjC,KAAK,SAASA,EAAa,QAC3B,KAAK,QAAO,KAEZ,QAAQ,MAAM,oBAAoBD,CAAI,EAAE;AAAA,IAE/C;AAAA,IAED,YAAYE,GAAM;AAEd,iBAAWC,KAAS,KAAK,QAAQ;AAC7B,cAAM,EAAE,OAAAC,GAAO,MAAAC,EAAM,IAAG,KAAK,aAAaF,EAAM,IAAI,GAC9CG,IAAQJ,EAAK,MAAME,CAAK;AAE9B,YAAIE,GAAO;AACP,gBAAMC,IAASF,EAAK,OAAO,CAACG,GAAK1F,GAAK2F,OAClCD,EAAI1F,CAAG,IAAIwF,EAAMG,IAAQ,CAAC,GACnBD,IACR,CAAE,CAAA;AACL,iBAAO,EAAE,OAAAL,GAAO,QAAAI;QACnB;AAAA,MACJ;AACD,aAAO;AAAA,IACV;AAAA,IAED,aAAaL,GAAM;AAEf,YAAMG,IAAO,CAAA,GACPK,IAAcR,EACf,QAAQ,aAAa,CAACS,GAAG7F,OACtBuF,EAAK,KAAKvF,CAAG,GACN,YACV,EACA,QAAQ,OAAO,KAAK;AACzB,aAAO,EAAE,OAAO,IAAI,OAAO,IAAI4F,CAAW,GAAG,GAAG,MAAAL;IACnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOD,SAASH,GAAMK,IAAS,IAAI;AAExB,YAAMK,IAAWV,EAAK,QAAQ,aAAa,CAACS,GAAG7F,MACvCyF,EAAOzF,CAAG,MAAM,UAChB,QAAQ,MAAM,cAAcA,CAAG,4BAA4BoF,CAAI,EAAE,GAC1D,IAAIpF,CAAG,MAEXyF,EAAOzF,CAAG,CACpB;AAED,aAAO,SAAS,OAAO8F;AAAA,IAC1B;AAAA,IAED,MAAM,WAAY;AACd,cAAQ,KAAI;AAAA,IACf;AAAA,IAED,SAAS,WAAY;AACjB,cAAQ,QAAO;AAAA,IAClB;AAAA,EACT;AAEA,GCrHaC,IAAU,SAAUC,GAAkBC,GAAiBC,GAAiB;AACjF,MAAID,MAAoB,UAAaC,MAAoB,QAAW;AAChE,YAAQ,MAAM,qDAAqD;AACnE;AAAA,EACH;AACD,EAAAF,IAAmBC,EAAgB,KAAM,IAAGA,EAAgB,KAAI,GAC/DD,IAA4CE,EAAgB,KAAI,IAA7CA,EAAgB,KAAM;AAC9C,GAQaC,IAAY,CAACC,GAAUC,GAAUC,MAAwB;AAClE,QAAMnD,IAAgB,CAAA,GAEhBC,IAAS,MAAMD,EAAc,QAAQ,CAACG,MAAeA,EAAU,CAAE;AAEvE,MAAI+C,EAAS,SAAS,YAAYC,EAAoB,SAAS,UAAU;AACrE,QAAI,CAACA,EAAoB,SAASD,CAAQ,GAAG;AACzC,cAAQ,MAAM,8BAA8BC,CAAmB,EAAE;AACjE;AAAA,IACH;AAED,OAAG,MAAMD,CAAQ;AAEjB,UAAME,IAAe,MAAM;AACvB,MAAAF,EAAS,KAAI,GACbC,EAAoB,KAAI;AAAA,IACpC,GAEcE,IAAgB,MAAM;AACxB,MAAAF,EAAoB,KAAI,GACxBD,EAAS,KAAI;AAAA,IACzB;AAEQ,IAAAE,KAEA,QAAQ,QAAQH,GAAU,EACrB,KAAK,MAAM;AACR,MAAAI,KACApD;IAChB,CAAa,EACA,MAAM,MAAMmD,EAAY,CAAE;AAAA,EACvC;AACQ,YAAQ,MAAM,wDAAwD;AAE1E,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA,IAKH,SAAS,CAAClD,MAAOF,EAAc,KAAKE,CAAE;AAAA,EAC9C;AACA;"}